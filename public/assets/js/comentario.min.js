"use strict";function countCharacters(a,b,c){var d=c-a.value.length;document.getElementById("spCaracteres").innerText=d}function validate(a){return a.id<=0||null==a.id?($("#dvAlert").html('<div class="alert alert-warning">ID inv치lido.</div>'),!1):a.comentario.length<10||a.comentario.length>500||null==a.comentario?($("#dvAlert").html('<div class="alert alert-warning">Coment치rio inv치lido.</div>'),!1):!0}function insert(a){$.ajax({url:$("#txtBase").val()+"comentario/insert/"+a.id,data:a,type:"POST",dataType:"JSON",beforeSend:function(){$("#btnComentar").attr("disabled","disabled"),$("#dvAlert").html('<div class="alert alert-info">Aguarde, inserindo...</div>')},complete:function(){$("#btnComentar").removeAttr("disabled")},success:function(a){return"undefined"!=typeof a.code&&1==a.code?($("#dvAlert").html('<div class="alert alert-success">Coment치rio enviado com sucesso.</div>'),$("#txtComentario").val(""),void getCommentList()):void $("#dvAlert").html('<div class="alert alert-warning">'+a.msg+"</div>")},error:function(a){$("#dvAlert").html('<div class="alert alert-danger">Houve um erro ao tentar inserir, tente novamente mais tarde.</div>'),console.log(a)}})}function getCommentList(){$.ajax({url:$("#txtBase").val()+"comentario/getLivro/"+$("#txtId").val(),data:{},type:"GET",dataType:"JSON",success:function(a){createList(a)},error:function(a){console.log(a)}})}function createList(a){var b=document.getElementById("dvComentarios");b.innerHTML="";for(var c=0;c<a.length;c++){var d=document.createElement("div");d.className="div-comentario";var e=document.createElement("p");e.className="nome-comentario",e.innerText=a[c].usuarioNome,d.appendChild(e);var f=document.createElement("p");f.innerText=a[c].comentario,d.appendChild(f),b.appendChild(d)}}$(document).ready(function(){getCommentList()}),$("#frmComentario").submit(function(a){var b={id:$("#txtId").val(),comentario:$("#txtComentario").val()};return validate(b)?(insert(b),void a.preventDefault()):void a.preventDefault()});